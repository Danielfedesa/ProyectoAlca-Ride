<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alca-Ride | Categoría Custom</title>
    <link rel="stylesheet" href="styles/modelos2.css">
    <script>
    
    /*Función para pintar los datos de la tabla Motocicletas*/
    function llamada(ServletListarCatalogo) {
        fetch(ServletListarCatalogo)
        .then(res => res.json())
        .then(res => pintarResultados(res));
    }
        
    function pintarResultados(motos) {
        // Filtrar la moto con id_Moto=1
        let moto1 = motos.find(moto => moto.id_Moto === 1);
        if (moto1) {
            // Relleno el div cont1 con los datos de la moto1
            let contenedor1 = document.getElementById("cont1");
            contenedor1.innerHTML = "";
            let divMoto1 = crearDivMoto(moto1);
            contenedor1.appendChild(divMoto1);
        }

        // Repito lo mismo para los cont2, 3 y 4.
        let moto2 = motos.find(moto => moto.id_Moto === 2);
        if (moto2) {
            let contenedor2 = document.getElementById("cont2");
            contenedor2.innerHTML = "";
            let divMoto2 = crearDivMoto(moto2);
            contenedor2.appendChild(divMoto2);
        }

        let moto3 = motos.find(moto => moto.id_Moto === 3);
        if (moto3) {
            let contenedor3 = document.getElementById("cont3");
            contenedor3.innerHTML = "";
            let divMoto3 = crearDivMoto(moto3);
            contenedor3.appendChild(divMoto3);
        }

        let moto4 = motos.find(moto => moto.id_Moto === 4);
        if (moto4) {
            let contenedor4 = document.getElementById("cont4");
            contenedor4.innerHTML = "";
            let divMoto4 = crearDivMoto(moto4);
            contenedor4.appendChild(divMoto4);
        }
    }
      
    //Creo el div con todos los datos tal y como lo tenía en el html estático antes de la modificación.
    function crearDivMoto(moto) {
        let divMoto = document.createElement("div");
        divMoto.classList.add("cajatexto");
        divMoto.innerHTML = `
            <h2>${moto.marca} ${moto.modelo}</h2>
            <div class="datos">
                <div>Año: ${moto.anio}</div>
                <div>Cilindrada: ${moto.cilindrada}</div>
            </div>
            <div class="carnet">Tipo de carnet: ${moto.tipo_Carnet}</div>
            <div class="precio">Precio día: ${moto.precio_Dia} €</div>
            <a href="formInsertarReserva.html?id_Moto=${moto.id_Moto}"><div class="reser">RESERVAR</div></a>
        `;
        return divMoto;
    };
    
  	</script>
</head>

  <!-- Creo una clase para el body, para la cual aplicaré 
    en su página de estilos un grid y le daré forma responsive.
    Divido el body en 4 apartados principales:
        header
        navbar
        contenido
        footer
    -->
<body class="gridContainer">

    <header class="header">
        <!--Pongo este div para que el enlace se ajuste exactamente al logo-->
        <div>
        <a href="index.html"><img src="images/logo1.png" alt="Logo Alca-Ride"></a>
        </div>
    </header>

    <nav class="navbar">
        <a href="index.html">Inicio</a>
        <a href="catalogo.html">Catálogo</a>
        <a href="condic.html">Condiciones</a>
        <a href="contacto.html">Contacto</a>
        <a href="login.html" class="enlace-inicio-sesion">Iniciar Sesión</a>
    </nav>
    
    <article class="contenido">
    
        <div class="present">
            <h3>
            Siéntete como Peter Fonda en Easy Rider, conduce una de nuestras motos custom más emblemáticas. Al más puro estilo americano, estas motos son las rompe-cuellos, ya que todo el mundo se girará a ver si el que conduce es Jax Teller de Sons of Anarchy.
            </h3>
         </div>
         

		 <div class="contModelo1">
              <img src="images/C_roadking.jpg" alt="Imagen Harley-Davidson Road King"> 
             <div id="cont1" class="cont1"></div>
         </div>


          <div class="contModelo2">
             <img src="images/C_vulcan.jpg" alt="Imagen Kawasaki Vulcan 900"> 
             <div id="cont2" class="cont2"></div>
          </div>
          
          <div class="contModelo3">
             <img src="images/C_indian.jpg" alt="Imagen Indian Black Horse"> 
             <div id="cont3" class="cont3"></div>
          </div>
          
          <div class="contModelo4">
             <img src="images/C_rebel.jpg" alt="Imagen Honda CMX500 Rebel"> 
             <div id="cont4" class="cont4"></div>
          </div>
      
    </article>

    <footer class="footer">
        <a href="privacidad.html" style="color: white;">Política de privacidad</a>
        <a href="legal.html" style="color: white;">Aviso legal</a>
        <p style="color: white;">Copyright Alca-Ride 2024 - Developed by Daniel Fernández</p>
    </footer>

</body>

    <script>
  //Función para controlar lel botón de Iniciar sesión cuando esté iniciada (Área personal)
    window.onload = function() {
	  //Meto la llamada a la función para listar los datos del catálogo
    	llamada("ServletListarCatalogo");
    	//si me deja el servlet entrar entonces controlo el setItem de sessionstorage, si no me deja el servlet entonces no grabo sessionstorage
        //Comprobamos si la sesión está iniciada       
        
    	var sesionIniciada = (sessionStorage.getItem('idLogin') != null && sessionStorage.getItem('idLogin') != 'null');
    	if (sesionIniciada) {
        	//alert("sesion iniciada");       	
        	//Capturamos el botón con la info del arbol del documento.
            var enlaceInicioSesion = document.querySelector('.navbar .enlace-inicio-sesion');
			//DOM  - MODELO DE OBJETO DE DOCUMENTO
            enlaceInicioSesion.textContent = 'Área personal';
            enlaceInicioSesion.href = 'clientArea.html';
            //alert(sessionStorage.getItem("idLogin"));
        } else {
        	//Si no tengo guardado ningún parámetro en el sessionstorage le redirijo al login
            var enlaceInicioSesion = document.querySelector('.navbar a[href="login.html"]');
            enlaceInicioSesion.textContent = 'Iniciar Sesión';
            enlaceInicioSesion.href = 'login.html';
        }
    };
    
    </script>

</html>