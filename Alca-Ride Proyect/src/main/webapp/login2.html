<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alca-Ride | Formulario de registro</title>
    <link rel="stylesheet" href="styles/formularios.css" />
  </head>

  <!-- Creo una clase para el body, para la cual aplicaré 
    en su página de estilos un grid y le daré forma responsive.
    Divido el body en 4 apartados principales:
        header
        navbar
        contenido
        footer
    -->
  <body class="gridContainer">
    <header class="header">
      <!--Pongo este div para que el enlace se ajuste exactamente al logo-->
      <div>
        <a href="index.html"
          ><img src="images/logo1.png" alt="Logo Alca-Ride"
        /></a>
      </div>
    </header>

    <!--Apartado del navbar-->
    <nav class="navbar">
      <a href="index.html">Inicio</a>
      <a href="catalogo.html">Catálogo</a>
      <a href="condic.html">Condiciones</a>
      <a href="contacto.html">Contacto</a>
      <a href="login.html" class="enlace-inicio-sesion">Iniciar Sesión</a>
    </nav>

    <!--Contenido general de la página-->
    <article class="contenido">
      <div class="formRegistro">
        <h1>¡ACCESO RESTRINGIDO!</h1>
        <h2>
          La página a la que inenta acceder requiere credenciales de acceso
        </h2>
        <h2>Por favor, inicie sesión para continuar</h2>
        <!--Formulario Login-->
        <form action="ServletLogin" method="post">
          <p>
            <label for="nombre_Usuario" class="colocar_nombre_Usuario"
              >Nombre de usuario
              <span class="obligatorio">*</span>
            </label>
            <input
              type="nombre_Usuario"
              name="nombre_Usuario"
              id="nombre_Usuario"
              required="obligatorio"
              placeholder="Escribe tu nombre de usuario"
            />
          </p>

          <p>
            <label for="nombre_pass" class="colocar_pass"
              >Contraseña
              <span class="obligatorio">*</span>
            </label>
            <input
              type="password"
              name="pass"
              id="pass"
              required="obligatorio"
              placeholder="Escribe tu contraseña"
            />
          </p>

          <button type="submit" name="enviar_formulario" id="enviar">
            <p>Enviar</p>
          </button>

          <p style="font-size: 18px">¿Aún no estás registrado?</p>
        </form>

        <div class="registrateAqui">
          <a href="formRegistro.html">Regístrate aquí</a>
        </div>
      </div>
    </article>

    <!--Footer-->
    <footer class="footer">
      <a href="privacidad.html" style="color: white">Política de privacidad</a>
      <a href="legal.html" style="color: white">Aviso legal</a>
      <p style="color: white">
        Copyright Alca-Ride 2024 - Developed by Daniel Fernández
      </p>
    </footer>
  </body>

  <script>
    //Función para controlar lel botón de Iniciar sesión cuando esté iniciada (Área personal)
    window.onload = function () {
      //si me deja el servlet entrar entonces controlo el setItem de sessionstorage, si no me deja el servlet entonces no grabo sessionstorage
      //Comprobamos si la sesión está iniciada
      var sesionIniciada =
        sessionStorage.getItem("idLogin") != null &&
        sessionStorage.getItem("idLogin") != "null";
      if (sesionIniciada) {
        //Capturamos el botón con la info del arbol del documento.
        var enlaceInicioSesion = document.querySelector(
          ".navbar .enlace-inicio-sesion"
        );
        // Cambiamos el texto del enlace a "Área personal"
        enlaceInicioSesion.textContent = "Área personal";
        // Cambiamos el href del enlace para que redirija a "clientArea.html"
        enlaceInicioSesion.href = "clientArea.html";
      } else {
        //Si no tengo guardado ningún parámetro en el sessionstorage le redirijo al login
        var enlaceInicioSesion = document.querySelector(
          '.navbar a[href="login.html"]'
        );
        // Cambiamos el texto del enlace a "Iniciar Sesión"
        enlaceInicioSesion.textContent = "Iniciar Sesión";
        // Aseguramos que el href del enlace sea "login.html"
        enlaceInicioSesion.href = "login.html";
      }
    };
  </script>
</html>
